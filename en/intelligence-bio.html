<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Intelig√™ncia BIO</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root {
      --accent: #74f2ce;
      --accent-2: #2de0c1;
      --bg1: #1a1a1a;
      --bg2: #000;
    }
    body {
      margin: 0;
      padding: 40px;
      background: radial-gradient(circle at center, var(--bg1) 0%, var(--bg2) 100%);
      color: white;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      overflow-x: hidden;
    }
    .top-bar { position: absolute; top: 20px; left: 20px; z-index: 200; }
    .top-bar a {
      text-decoration: none; color: var(--accent); font-weight: bold;
      font-size: 1em; border: 1px solid var(--accent); padding: 8px 15px;
      border-radius: 20px; background: rgba(0,0,0,0.18);
    }
    h1 { text-align:center; font-size:2.4em; margin-bottom:18px;
      text-shadow: 0 0 12px var(--accent); filter: drop-shadow(0 0 5px var(--accent-2));
    }
    .content { max-width:1000px; margin:0 auto; font-size:1.05em; text-align:justify; margin-bottom:40px; }

    .layout { display:flex; justify-content:center; align-items:flex-start; gap:30px; margin-top:30px; flex-wrap:wrap; }
    .left-col { display:flex; flex-direction:column; align-items:center; flex:1 1 600px; }

    .controls { text-align:center; margin-bottom:10px; }
    .controls button {
      background: rgba(116,242,206,0.1); border:1px solid var(--accent); color:var(--accent);
      font-size:1em; margin:5px; padding:10px 20px; border-radius:25px; cursor:pointer; z-index:150;
    }

    .image-container { position:relative; text-align:center; min-height:480px; margin-top:120px; }
    .gif-wrapper {
      width:280px; height:280px; border-radius:50%; border:2px solid var(--accent);
      overflow:hidden; margin:0 auto; box-shadow:0 0 25px var(--accent-2);
      position:relative; z-index:60; background:rgba(0,0,0,0.15);
      display:flex; align-items:center; justify-content:center;
    }
    .gif-wrapper img { width:100%; height:100%; object-fit:contain; display:block; }

    .orbit { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; z-index:50; pointer-events:none; }
    .orbit-ring { position:relative; width:640px; max-width:calc(100% - 40px); height:640px; border-radius:50%; }
    .orbit-svg { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:70; }

    .module {
      position:absolute; min-width:120px; max-width:160px; height:40px;
      background: rgba(116,242,206,0.08); border-radius:20px;
      border:1px solid rgba(116,242,206,0.25);
      color:var(--accent); font-size:.95em; text-align:center; line-height:40px;
      transition: transform .18s, box-shadow .18s, background .18s, border .18s;
      pointer-events:auto; white-space:nowrap; z-index:80;
    }
    .module:hover { transform:scale(1.06); box-shadow:0 0 20px rgba(116,242,206,0.2); cursor:pointer; background:rgba(116,242,206,0.17); }
    .module.active { background: rgba(116,242,206,0.3); border:1px solid var(--accent-2); }

    .mod-resumo {
      margin-top:20px; padding:15px; max-width:500px; text-align:center; font-size:1em; color:#eee;
      border:1px solid var(--accent); border-radius:10px; background:rgba(0,0,0,0.35);
      box-shadow:0 0 12px rgba(116,242,206,0.15); opacity:1; transition:opacity .45s ease;
    }

    .panel {
      width:280px; background:rgba(0,0,0,0.55); border:1px solid var(--accent);
      border-radius:12px; padding:12px; box-shadow:0 0 12px rgba(116,242,206,0.15); font-size:.95em;
      flex-shrink:0;
    }
    .panel h2 { margin:0 0 8px 0; color:var(--accent); font-size:1em; }

    .mist { position:fixed; width:100%; height:100%; background:radial-gradient(circle, rgba(116,242,206,0.04) 0%, transparent 70%); filter:blur(25px); pointer-events:none; z-index:-1; }

    @media (max-width:900px){ .orbit-ring{width:520px;height:520px;} .gif-wrapper{width:220px;height:220px;} .module{min-width:110px;height:36px;line-height:36px;} .panel{width:220px;} }
    @media (max-width:520px){ .orbit-ring{width:360px;height:360px;} .gif-wrapper{width:160px;height:160px;} .module{min-width:90px;height:34px;line-height:34px;} .panel{width:100%;max-width:320px;} }

  </style>
</head>
<body>
  <div class="top-bar"><a href="bio_cloud.html">‚¨ÖÔ∏è Voltar</a></div>
  <h1>Intelig√™ncia BIO</h1>

  <div class="content" id="introText">
    <!-- Texto institucional (pode manter esse bloco ou carregar do JSON se preferir) -->
    <p>
      <strong>BIO Intelligence</strong> is the sensitive, distributed brain of the BIOCERR architecture. Far beyond automation, it learns from the territory, listens to local knowledge, and integrates ecological, social, and economic data to guide regenerative decisions in real time.
    </p>

    <p>
      Acting as an interface between communities, ecosystems, and technologies, BIO observes patterns, identifies opportunities for cooperation, and feeds the system with living knowledge. It fosters dialogue between the ancestral and the emerging, between the digital and the organic.    </p>

    <p>
      Connected to environmental sensors, management platforms, distribution networks, and community databases, BIO analyzes flows, designs scenarios, and adjusts strategies based on regenerative and affective indicators.    </p>

    <p>
      Its function is not to centralize, but to distribute intelligence. At each node in the network, BIO strengthens local autonomy and wisdom, respecting the uniqueness of each biome and culture.    </p>

    <p>
      In practice, it manifests itself through transparent algorithms, accessible interfaces, intuitive visualizations, and decisions that consider collective well-being and ecological balance. Intelligence is relational, territorial, and regenerative.
   </p>
  </div>

  <div class="layout">
    <div class="left-col">
      <div class="controls">
        <button id="alertBtn">‚ö° Simulate Alert</button>
        <button id="regenBtn">üå± Regenerate Network</button>
      </div>

      <div class="image-container" id="imageContainer">
        <div class="gif-wrapper" id="gifWrapper">
          <img src="mandala ingles 2.gif" alt="Mandala BIO">
        </div>
        <div class="orbit">
          <div class="orbit-ring" id="orbitRing">
            <svg class="orbit-svg" id="orbitSvg"></svg>
          </div>
        </div>
      </div>

      <div class="mod-resumo" id="modResumo">üîé Select a module to view the summary.</div>
    </div>

    <div class="panel" aria-live="polite">
      <h2>Status BIO</h2>
      <p id="narrativa">Carregando narrativa...</p>
    </div>
  </div>

  <div class="mist"></div>

  <script>
  (async function(){
    // carrega JSON din√¢mico
    const jsonPath = "bio_data.json";
    let data = null;
    try {
      const res = await fetch(jsonPath, {cache: "no-store"});
      if(res.ok) data = await res.json();
    } catch(e) {
      console.warn('N√£o foi poss√≠vel carregar bio_data.json ‚Äî usando fallback interno.', e);
    }

    // fallback caso JSON n√£o carregue
    const fallback = {
      modules: {
        "Interface": "Human-digital touchpoint.",
        "Security": "Security and monitoring layer.",
        "MCFFPs": "Decentralized Mini-Power Plants.",
        "Industry": "Connected parent industry.",
        "Learning": "Continuous regenerative learning.",
        "Integration": "Governance and coordination.",
        "Logistics": "Smart logistics network.",
        "Impact": "Real-time impact measurement.",
        "Sustainability": "Regenerative ecological indicators.",
        "Innovation": "Open innovation space."
      },
      frases: [
        "‚ôªÔ∏è 98% of data reintegrated.",
        "üå± Positive sustainability.",
        "üöö Emissions reduced by 12%.",
        "üîí Armored security.",
        "üåç Updated global impact."
      ]
    };

    const source = data || fallback;
    const moduleData = source.modules || fallback.modules;
    const frases = source.frases || fallback.frases;

    const moduleNames = Object.keys(moduleData);
    const orbitRing = document.getElementById('orbitRing');
    const orbitSvg = document.getElementById('orbitSvg');
    const gifWrapper = document.getElementById('gifWrapper');
    const resumoEl = document.getElementById('modResumo');
    const narrEl = document.getElementById('narrativa');

    let modules = [], lines = [];
    let angleOffset = 0;
    const speed = 0.12;

    function createStructure(){
      orbitRing.querySelectorAll('.module').forEach(n=>n.remove());
      orbitSvg.innerHTML = '';
      modules = []; lines = [];

      moduleNames.forEach((name)=>{
        const el = document.createElement('div');
        el.className = 'module';
        el.textContent = name;
        // append before lines so DOM order is stable
        orbitRing.appendChild(el);
        modules.push(el);

        const line = document.createElementNS("http://www.w3.org/2000/svg","line");
        line.setAttribute('stroke','rgba(116,242,206,0.18)');
        line.setAttribute('stroke-width','2');
        orbitSvg.appendChild(line);
        lines.push(line);

        // clique mostra resumo carregado do JSON
        el.addEventListener('click', ()=>{
          modules.forEach(m=>m.classList.remove('active'));
          el.classList.add('active');

          // fade-out then update then fade-in
          resumoEl.style.opacity = 0;
          setTimeout(()=>{
            // garantir que usamos a chave exata do JSON
            const txt = moduleData[name] || ("Resumo n√£o encontrado para " + name);
            resumoEl.textContent = "üìå " + txt;
            resumoEl.style.opacity = 1;
          }, 260);
        }, {passive:true});
      });
    }

    function update(){
      if(modules.length===0) { requestAnimationFrame(update); return; }
      const ringRect = orbitRing.getBoundingClientRect();
      const gifRect = gifWrapper.getBoundingClientRect();
      const ringW = ringRect.width, ringH = ringRect.height;
      const centerX = (gifRect.left - ringRect.left) + gifRect.width/2;
      const centerY = (gifRect.top - ringRect.top) + gifRect.height/2;

      const modW = modules[0].offsetWidth;
      const modH = modules[0].offsetHeight;

      const maxRad = Math.min(ringW, ringH)/2 - Math.max(modW, modH)/2 - 18;
      const minRad = gifRect.width/2 + Math.max(modW, modH)/2 + 20;
      const radius = Math.max(minRad, Math.min(maxRad, 200));

      orbitSvg.setAttribute('viewBox', `0 0 ${ringW} ${ringH}`);

      modules.forEach((m,i)=>{
        const baseAngle = (360/modules.length)*i;
        const angle = baseAngle + angleOffset;
        const rad = (angle-90)*Math.PI/180;
        const x = centerX + radius*Math.cos(rad) - modW/2;
        const y = centerY + radius*Math.sin(rad) - modH/2;
        m.style.left = x + "px";
        m.style.top = y + "px";
        lines[i].setAttribute('x1', centerX);
        lines[i].setAttribute('y1', centerY);
        lines[i].setAttribute('x2', x+modW/2);
        lines[i].setAttribute('y2', y+modH/2);
      });

      angleOffset += speed;
      requestAnimationFrame(update);
    }

    // narrativa rotativa (do JSON)
    let idx = 0;
    function cycleFrases(){
      if(frases && frases.length>0) {
        narrEl.textContent = frases[idx % frases.length];
        idx++;
      }
    }
    setInterval(cycleFrases, 5000);
    cycleFrases();

    // bot√µes
    document.getElementById('alertBtn').onclick = ()=>{
      modules.forEach(m=>m.style.background="rgba(255,75,75,0.28)");
      lines.forEach(l=>l.setAttribute('stroke','rgba(255,75,75,0.6)'));
      setTimeout(()=>{ modules.forEach(m=>m.style.background=""); lines.forEach(l=>l.setAttribute('stroke','rgba(116,242,206,0.18)')); },2000);
    };
    document.getElementById('regenBtn').onclick = ()=>{
      let step=0;
      const interval = setInterval(()=>{
        if(step<modules.length){
          modules[step].style.background="rgba(75,255,119,0.28)";
          lines[step].setAttribute('stroke','rgba(75,255,119,0.7)');
          step++;
        } else {
          clearInterval(interval);
          setTimeout(()=>{ modules.forEach(m=>m.classList.remove('active')); modules.forEach(m=>m.style.background=""); lines.forEach(l=>l.setAttribute('stroke','rgba(116,242,206,0.18)')); },1000);
        }
      },200);
    };

    createStructure();
    requestAnimationFrame(update);

  })();
  </script>
</body>
</html>
