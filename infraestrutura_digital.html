<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Infraestrutura Digital</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* --- Estilos base (mantive seu visual) --- */
    body {
      margin: 0;
      padding: 40px;
      background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
      color: white;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
    }

    .top-bar {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 10;
    }

    .top-bar a {
      text-decoration: none;
      color: #74f2ce;
      font-weight: bold;
      font-size: 1em;
      border: 1px solid #74f2ce;
      padding: 8px 15px;
      border-radius: 20px;
      transition: all 0.3s ease;
      background: rgba(0,0,0,0.35);
    }

    .top-bar a:hover {
      background: rgba(116, 242, 206, 0.12);
      box-shadow: 0 0 10px #74f2ce;
    }

    h1 {
      text-align: center;
      font-size: 3em;
      text-shadow: 0 0 15px #74f2ce, 0 0 25px #74f2ce;
      filter: drop-shadow(0 0 5px #2de0c1);
      margin-bottom: 40px;
    }

    .content {
      max-width: 1000px;
      margin: 0 auto;
      font-size: 1.15em;
      text-align: justify;
    }

    .image-container {
      text-align: center;
      margin: 40px 0;
    }

    .image-container img {
      width: 35%;
      max-width: 420px;
      border: 2px solid #74f2ce;
      border-radius: 10px;
      box-shadow: 0 0 15px #2de0c1;
    }

    .mist {
      position: fixed;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle, rgba(116, 242, 206, 0.05) 0%, transparent 70%);
      filter: blur(25px);
      pointer-events: none;
      z-index: -1;
    }

    .tech-modules {
      margin: 60px auto;
      max-width: 900px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    .tech-card {
      background-color: rgba(116, 242, 206, 0.08);
      border: 1px solid #74f2ce;
      border-radius: 12px;
      padding: 20px 30px;
      cursor: pointer;
      font-size: 1.05em;
      color: #74f2ce;
      text-align: center;
      box-shadow: 0 0 12px rgba(45, 224, 193, 0.12);
      transition: all 0.25s ease;
      min-width: 220px;
    }

    .tech-card:hover {
      background-color: rgba(116, 242, 206, 0.16);
      box-shadow: 0 0 18px #2de0c1;
    }

    .box-hidden {
      display: none;
      margin-top: 10px;
      margin-bottom: 40px;
      background-color: rgba(255,255,255,0.04);
      padding: 20px;
      border-radius: 10px;
      border-left: 3px solid #74f2ce;
      color: #ddd;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
      text-align: justify;
    }

    .box-hidden p, .box-hidden ul { color: #e6f7f1; }

    .link-pdf {
      color: #74f2ce;
      font-weight: bold;
      text-decoration: none;
      display: inline-block;
      margin-top: 10px;
    }

    .link-pdf:hover { text-decoration: underline; }

    /* --- Estilos do gr√°fico (vis-network) --- */
    .graph-wrapper {
      max-width: 1000px;
      margin: 24px auto 10px auto;
      padding: 14px;
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(116,242,206,0.06);
      box-shadow: 0 6px 20px rgba(0,0,0,0.6);
    }

    #network, #networkGaia {
      width: 100%;
      height: 390px; /* 25% menor que 520px */
      background: transparent; /* para herdar o fundo escuro */
      border-radius: 8px;
    }

    /* Instru√ß√µes de uso do gr√°fico */
    .graph-instructions {
      margin-top: 10px;
      font-size: 0.95em;
      line-height: 1.5;
      color: #cfeee6;
      background: rgba(255,255,255,0.03);
      border: 1px dashed rgba(116,242,206,0.35);
      border-radius: 8px;
      padding: 10px 12px;
    }

    /* Painel de detalhes do n√≥ */
    #nodeDetails, #nodeDetailsGaia {
      display: none;
      max-width: 900px;
      margin: 14px auto 40px;
      background: rgba(255,255,255,0.03);
      border-left: 3px solid #74f2ce;
      color: #e7f9f2;
      padding: 18px;
      border-radius: 8px;
      text-align: left;
    }

    #nodeDetails h3, #nodeDetailsGaia h3 { margin-top: 0; color: #74f2ce; }
    .close-btn {
      display: inline-block;
      margin-top: 10px;
      background: transparent;
      color: #74f2ce;
      border: 1px solid rgba(116,242,206,0.2);
      padding: 6px 10px;
      border-radius: 8px;
      cursor: pointer;
    }

    /* Responsividade */
    @media (max-width: 600px) {
      h1 { font-size: 2em; padding-top: 10px; }
      .tech-card { min-width: 100%; }
      #network, #networkGaia { height: 320px; }
    }
  </style>

  <!-- vis-network -->
  <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
</head>
<body>

  <div class="top-bar">
    <a href="nuvem_bio.html">‚¨ÖÔ∏è Voltar para Nuvem BIO</a>
  </div>

  <h1>Infraestrutura Digital</h1>

  <div class="content">
    <p>
      A <strong>Infraestrutura Digital</strong> da BIOCERR √© a espinha dorsal invis√≠vel que conecta dados, processos e territ√≥rios de forma integrada e regenerativa. Ela vai al√©m da tecnologia por si s√≥ ‚Äî √© um ecossistema de suporte t√©cnico, √©tico e territorial, que permite √† rede BIO operar com transpar√™ncia, intelig√™ncia e corresponsabilidade.
    </p>

    <p>
      Ao inv√©s de plataformas centralizadas, utilizamos arquiteturas distribu√≠das, interoper√°veis e de c√≥digo aberto. Isso garante autonomia local, soberania dos dados e participa√ß√£o ativa das comunidades envolvidas. Cada n√≥ da rede contribui e se beneficia, fortalecendo a resili√™ncia coletiva.
    </p>

    <p>
      A infraestrutura inclui m√≥dulos de rastreabilidade, gest√£o de indicadores regenerativos, acompanhamento em tempo real e integra√ß√£o com sistemas p√∫blicos e comunit√°rios. Tudo √© pensado para ser modular, adapt√°vel e em constante evolu√ß√£o.
    </p>

    <p>
      A intelig√™ncia artificial <strong>BIO</strong> atua como mediadora dessas intera√ß√µes digitais, traduzindo complexidade em clareza, sugerindo caminhos, alertando sobre desequil√≠brios e apoiando decis√µes informadas com base nos princ√≠pios da regenera√ß√£o.
    </p>

    <p>
      Investir em infraestrutura digital √© garantir que a regenera√ß√£o aconte√ßa com consist√™ncia, monitoramento e alinhamento entre pessoas, territ√≥rios e tecnologias. √â o alicerce para um novo ciclo de cuidado planet√°rio.
    </p>

    <div class="image-container">
      <img src="infraestrutura_digital.png" alt="Ilustra√ß√£o de Infraestrutura Digital">
    </div>
  </div>

  <div class="tech-modules">
    <div class="tech-card" onclick="toggleBox('blockchain')">üß± Blockchain</div>
    <div id="blockchain" class="box-hidden">
      <p><strong>BIOBlock:</strong> BIOBlock √© o m√≥dulo de conten√ß√£o digital descentralizada da BIOCERR. Sua fun√ß√£o √© proteger os fluxos de informa√ß√£o e os dispositivos inteligentes, tanto dentro das MCEFPs quanto em seu entorno territorial. Inspirado nos princ√≠pios da soberania tecnol√≥gica e da transpar√™ncia distribu√≠da, o BIOBlock utiliza tecnologia blockchain para autenticar, registrar e proteger todas as intera√ß√µes digitais cr√≠ticas, como:</p>

      <ul>
        <li>Abertura e fechamento de v√°lvulas</li>
        <li>Envasamento e rastreabilidade de lotes</li>
        <li>Sincroniza√ß√£o com sensores locais e remotos (IoT)</li>
        <li>Alertas de seguran√ßa e integridade da rede</li>
      </ul>

      <p>Este m√≥dulo ser√° opcional, configur√°vel e compat√≠vel com legisla√ß√µes locais de privacidade e interoperabilidade.</p>
    </div>

    <div class="tech-card" onclick="toggleBox('bigdata')">üìä Big Data</div>
    <div id="bigdata" class="box-hidden">
      <p><strong>Fluxo Vivo:</strong> O m√≥dulo de Big Data da BIOCERR transforma volumes massivos de informa√ß√µes em intelig√™ncia regenerativa. Ele coleta, organiza e interpreta dados provenientes de diversas fontes ‚Äî desde sensores nas MCEFPs, at√© sistemas p√∫blicos, bases clim√°ticas, indicadores comunit√°rios e intera√ß√µes em tempo real com usu√°rios.</p>
    </div>

    <div class="tech-card" onclick="toggleBox('iot')">üåê IoT</div>
    <div id="iot" class="box-hidden">
      <p><strong>Rede BIO-IoT:</strong> Na BIOCERR, a Internet das Coisas (IoT) √© muito mais do que conectar objetos ‚Äî √© uma forma de dar sensibilidade ao territ√≥rio. Cada MCEFP funciona como um organismo vivo, equipado com sensores e dispositivos que monitoram vari√°veis em tempo real: temperatura, fluxo de envase, uso de √°gua, n√≠vel dos reservat√≥rios, qualidade do ar, consumo de energia e at√© padr√µes de intera√ß√£o humana.</p>
    </div>

    <!-- === G√äMEOS DIGITAIS (AQUI VAI O GR√ÅFICO) === -->
    <div class="tech-card" onclick="toggleBox('gemeos')">üßø G√™meos Digitais</div>
    <div id="gemeos" class="box-hidden">
      <p><strong>Simuladores Regenerativos:</strong> Na BIOCERR, os G√™meos Digitais n√£o s√£o apenas c√≥pias virtuais de equipamentos ou processos ‚Äî eles s√£o espelhos vivos de territ√≥rios regenerativos. Cada MCEFP e Ind√∫stria Matriz pode ter sua vers√£o digital que simula, antecipa e aprende com o comportamento real dos sistemas f√≠sicos.</p>

      <p>Isso significa que conseguimos prever falhas, otimizar rotas, adaptar produ√ß√µes e at√© testar decis√µes complexas sem causar impacto real. √â como se a pr√≥pria f√°brica pudesse sonhar antes de agir.</p>

      <p>Os G√™meos Digitais da BIOCERR tamb√©m integram dados ambientais, sociais e operacionais em tempo real. Assim, conseguimos entender como as decis√µes locais afetam o entorno, a biodiversidade, os fluxos de log√≠stica e o bem-estar das comunidades.</p>

      <p>Mais do que automa√ß√£o, os G√™meos Digitais permitem governan√ßa antecipat√≥ria, ou seja, decis√µes baseadas em simula√ß√µes, com participa√ß√£o humana e intelig√™ncia artificial trabalhando em conjunto para o bem coletivo.</p>

      <p>Na vis√£o BIOCERR, um G√™meo Digital √© uma mem√≥ria sens√≠vel e projetiva da rela√ß√£o entre tecnologia, natureza e cuidado.</p>

      <!-- === Container do gr√°fico interativo (vis-network) === -->
      <div class="graph-wrapper" aria-label="Gr√°fico interativo dos g√™meos">
        <div id="network"></div>

        <!-- instru√ß√µes -->
        <div id="graphInstructions" class="graph-instructions">
          üí° <strong>Como interagir com o gr√°fico:</strong><br>
          ‚Ä¢ Role o mouse (ou pin√ßa no touch) para dar zoom.<br>
          ‚Ä¢ Clique nos n√≥s para ver conte√∫do.<br>
          ‚Ä¢ Clique e arraste o fundo para mover o quadro.<br>
          ‚Ä¢ Clique e arraste um bot√£o para reposicion√°-lo; as setas acompanham.<br>
          ‚Ä¢ D√™ <em>duplo clique</em> em qualquer √°rea vazia para recentralizar a vis√£o.
        </div>

        <div id="nodeDetails" role="region" aria-live="polite"></div>
      </div>

      <!-- === BOT√ÉO ACESSE O G√äMEOS DIGITAIS === -->
      <div style="text-align: center; margin: 20px 0;">
        <a href="G√™meos_Digitais_da_BIO.html"
           style="padding: 12px 25px; font-size: 1.1em; border-radius: 25px; text-decoration: none; 
                  color: white; background: #74f2ce; display: inline-block; transition: 0.3s;">
          Acesse o G√™meos Digitais
        </a>
      </div>
    </div>

    <!-- === CIBERSEGURAN√áA (REFORMULADO NO MODELO DOS G√äMEOS) === -->
    <div class="tech-card" onclick="toggleBox('ciber')">üõ°Ô∏è Ciberseguran√ßa</div>
    <div id="ciber" class="box-hidden">
      <p><strong>Escudo BIO ‚Äì Nuvem GAIA e Opera√ß√µes:</strong> A ciberseguran√ßa na BIOCERR √© uma camada viva, distribu√≠da e audit√°vel que protege pessoas, dados e processos do SMPD em todas as frentes: Ind√∫stria Matriz, MCEFPs, g√™meos digitais e a nuvem GAIA. Atuamos em defesa por camadas (Zero Trust), combinando identidade forte, criptografia ponta a ponta, microssegmenta√ß√£o de rede, monitoramento cont√≠nuo pela IA BIO e rotinas de resposta a incidentes com auditoria imut√°vel.</p>

      <ul>
        <li><strong>Identidade e Acesso:</strong> Autentica√ß√£o multifator (MFA), certificados por unidade (PKI BIO), RBAC por papel (operador, auditor, governan√ßa) e chaves rotativas.</li>
        <li><strong>Per√≠metro e Tr√¢nsito:</strong> Firewalls NGFW, VPN (WireGuard/OpenVPN), TLS 1.3, pol√≠tica de <em>least privilege</em> entre servi√ßos (service-to-service).</li>
        <li><strong>Nuvem GAIA:</strong> Criptografia em repouso (KMS), orquestra√ß√£o com pol√≠ticas de seguran√ßa, isolamento por namespaces/projetos, varredura de imagens e detec√ß√£o de drift.</li>
        <li><strong>Monitoramento & SIEM:</strong> Coletores de logs, correla√ß√£o de eventos (Wazuh/ELK), alertas em tempo real e playbooks de resposta (TheHive/Cortex).</li>
        <li><strong>Backup & Resili√™ncia:</strong> Replica√ß√£o geogr√°fica, testes de restaura√ß√£o, <em>immutable logs</em> (WORM) e registro de incidentes em blockchain interno.</li>
        <li><strong>Conformidade & √âtica:</strong> Diretrizes ISO 27001/NIST, privacidade por design e trilha de governan√ßa com participa√ß√£o do Conselho BIO.</li>
      </ul>

      <!-- === Gr√°fico interativo da Seguran√ßa GAIA === -->
      <div class="graph-wrapper" aria-label="Mapa interativo da seguran√ßa da nuvem GAIA">
        <div id="networkGaia"></div>
        <div class="graph-instructions">

          <!-- instru√ß√µes -->
        <div id="graphInstructions" class="graph-instructions">
          üí° <strong>Como interagir com o gr√°fico:</strong><br>
          ‚Ä¢ Role o mouse (ou pin√ßa no touch) para dar zoom.<br>
          ‚Ä¢ Clique nos n√≥s para ver conte√∫do.<br>
          ‚Ä¢ Clique e arraste o fundo para mover o quadro.<br>
          ‚Ä¢ Clique e arraste um bot√£o para reposicion√°-lo; as setas acompanham.<br>
          ‚Ä¢ D√™ <em>duplo clique</em> em qualquer √°rea vazia para recentralizar a vis√£o.
        </div>
        <div id="nodeDetailsGaia" role="region" aria-live="polite"></div>
      </div>

      <!-- === BOT√ÉO ACESSE O PAINEL DE SEGURAN√áA GAIA === -->
      <div style="text-align:center; margin: 20px 0;">
        <a href="Seguranca_Digital_GAIA.html" 
           style="padding: 12px 25px; font-size: 1.1em; border-radius: 25px; text-decoration: none; color: white; background: #74f2ce; display: inline-block; transition: 0.3s;">
          Acessar Painel de Seguran√ßa GAIA
        </a>
      </div>
    </div>
  </div>

  <div class="mist"></div>

  <!-- ===== Scripts ===== -->
  <script>
    /* Controle de abrir/fechar m√≥dulos e ajuste dos gr√°ficos */
    let didFitOnceGemeos = false;
    let didFitOnceGaia = false;

    function toggleBox(id) {
      const box = document.getElementById(id);
      box.style.display = box.style.display === "block" ? "none" : "block";

      // Ajustar redes quando a se√ß√£o abre
      setTimeout(() => {
        if (id === 'gemeos' && window.network) {
          window.network.redraw();
          if (!didFitOnceGemeos) {
            window.network.fit({ animation: { duration: 600, easing: 'easeInOutQuad' } });
            didFitOnceGemeos = true;
          }
        }
        if (id === 'ciber' && window.networkGaia) {
          window.networkGaia.redraw();
          if (!didFitOnceGaia) {
            window.networkGaia.fit({ animation: { duration: 600, easing: 'easeInOutQuad' } });
            didFitOnceGaia = true;
          }
        }
      }, 300);
    }
  </script>

  <script>
    /* --- Inicializa√ß√£o do vis-network: G√äMEOS DIGITAIS (mantido) --- */
    const nodes = new vis.DataSet([
      { id: 1, label: "Nuvem BIOCERR", shape: "box", color: { background: '#083e36', border: '#74f2ce' }, font: { color: 'white' } },
      { id: 2, label: "Ind√∫stria Matriz", shape: "box", color: { background: '#063a6b', border: '#74f2ce' }, font: { color: 'white' } },
      { id: 3, label: "MCEFPs", shape: "box", color: { background: '#4f2b63', border: '#74f2ce' }, font: { color: 'white' } },
      { id: 4, label: "Operadores", shape: "ellipse", color: { background: '#b36100', border: '#ffd9b3' }, font: { color: 'white' } },
      { id: 5, label: "Mercado Final", shape: "ellipse", color: { background: '#8b053a', border: '#ffb3c9' }, font: { color: 'white' } },
      { id: 6, label: "Governan√ßa BIO", shape: "box", color: { background: '#2b3a3f', border: '#9fbdb6' }, font: { color: 'white' } },
      { id: 7, label: "IA BIO", shape: "box", color: { background: '#145a2f', border: '#74f2ce' }, font: { color: 'white' } }
    ]);

    const edges = new vis.DataSet([
      { from: 1, to: 2, arrows: "to", color: { color: '#74f2ce' } },
      { from: 1, to: 6, arrows: "to", color: { color: '#74f2ce' } },
      { from: 6, to: 7, arrows: "to", color: { color: '#74f2ce' } },
      { from: 2, to: 3, arrows: "to", color: { color: '#74f2ce' } },
      { from: 3, to: 4, arrows: "to", color: { color: '#ffd28f' } },
      { from: 4, to: 5, arrows: "to", color: { color: '#ff9fb3' } },
      { from: 7, to: 3, arrows: "to", color: { color: '#74f2ce' } },
      { from: 7, to: 2, arrows: "to", color: { color: '#74f2ce' } }
    ]);

    const options = {
      physics: {
        enabled: true,
        barnesHut: {
          gravitationalConstant: -8000,
          centralGravity: 0.2,
          springLength: 200,
          springConstant: 0.04
        },
        stabilization: { enabled: true, iterations: 200 }
      },
      interaction: { hover: true, dragNodes: true, zoomView: true, tooltipDelay: 100 },
      nodes: { borderWidth: 2, shadow: true, font: { size: 14 } },
      edges: { arrows: { to: { enabled: true, scaleFactor: 1.2 } }, smooth: { enabled: true, type: 'dynamic' } },
      layout: { improvedLayout: true }
    };

    const container = document.getElementById('network');
    const data = { nodes: nodes, edges: edges };
    const network = new vis.Network(container, data, options);
    window.network = network;

    network.on('doubleClick', function () {
      network.fit({ animation: { duration: 400, easing: 'easeInOutQuad' } });
    });

    const details = {
      1: { title: "Nuvem BIOCERR", text: "Camada de coordena√ß√£o e servi√ßos: broker MQTT, armazenamento timeseries, APIs e orquestra√ß√£o dos g√™meos. Hospeda modelos, dashboards e integra√ß√µes externas." },
      2: { title: "Ind√∫stria Matriz", text: "Produz os concentrados-base em IBCs, gerencia controle de qualidade, rotinas de expedi√ß√£o e integra√ß√£o com sistemas corporativos (ERP/MES). Fonte prim√°ria de dados e rastreabilidade." },
      3: { title: "MCEFPs", text: "Mini Centrais Envasadoras e Finalizadoras: unidades locais que personalizam lotes, operam com sensoriamento e replicam o DNA do SMPD no territ√≥rio." },
      4: { title: "Operadores", text: "Usu√°rios locais que interagem com interfaces simples: execu√ß√£o por lote, checks de QC, manuten√ß√£o local e comunica√ß√£o com a BIO (via painel ou app)." },
      5: { title: "Mercado Final", text: "Pontos de venda, hospitais e consumidores finais que recebem produtos personalizados; enviam feedback e dados de demanda que alimentam o g√™meo." },
      6: { title: "Governan√ßa BIO", text: "Conselho que valida pol√≠ticas, limita√ß√µes √©ticas e aprova altera√ß√µes estrat√©gicas. Atua em fluxo HITL (human-in-the-loop) para decis√µes cr√≠ticas." },
      7: { title: "IA BIO", text: "M√≥dulo de intelig√™ncia que processa dados, gera previs√µes (manuten√ß√£o, demanda), simula cen√°rios e sugere otimiza√ß√µes para opera√ß√£o e impacto socioambiental." }
    };

    function showNodeDetails(id) {
      const panel = document.getElementById('nodeDetails');
      const d = details[id];
      if (!d) return;
      panel.innerHTML = `
        <h3>${d.title}</h3>
        <p>${d.text}</p>
        <button class="close-btn" onclick="closeDetails()">Fechar</button>
      `;
      panel.style.display = 'block';
      panel.scrollIntoView({behavior: "smooth", block: "center"});
    }

    function closeDetails() {
      const panel = document.getElementById('nodeDetails');
      panel.style.display = 'none';
      panel.innerHTML = '';
    }

    network.on("click", function (params) {
      if (params.nodes.length > 0) showNodeDetails(params.nodes[0]);
    });

    document.addEventListener("visibilitychange", function() {
      if(!document.hidden && window.network) window.network.redraw();
    });
  </script>

  <script>
    /* --- Inicializa√ß√£o do vis-network: SEGURAN√áA GAIA (novo) --- */
    const gaiaNodes = new vis.DataSet([
      { id: 'gaia', label: 'Nuvem GAIA', shape: 'box', color: { background: '#0b2e2a', border: '#74f2ce' }, font: { color: 'white' } },
      { id: 'idm', label: 'Identidade & Acesso', shape: 'ellipse', color: { background: '#254b6e', border: '#9fd8ff' }, font: { color: 'white' } },
      { id: 'edge', label: 'MCEFPs (Edge)', shape: 'box', color: { background: '#4f2b63', border: '#d8a8ff' }, font: { color: 'white' } },
      { id: 'plant', label: 'Ind√∫stria Matriz', shape: 'box', color: { background: '#063a6b', border: '#74f2ce' }, font: { color: 'white' } },
      { id: 'perimeter', label: 'Per√≠metro / VPN / NGFW', shape: 'box', color: { background: '#1d3b2d', border: '#74f2ce' }, font: { color: 'white' } },
      { id: 'crypto', label: 'Criptografia (TLS 1.3 / KMS)', shape: 'box', color: { background: '#123b34', border: '#74f2ce' }, font: { color: 'white' } },
      { id: 'siem', label: 'Monitoramento & SIEM', shape: 'box', color: { background: '#2b3a3f', border: '#9fbdb6' }, font: { color: 'white' } },
      { id: 'bio', label: 'BIO ‚Äì Defesa Adaptativa', shape: 'box', color: { background: '#145a2f', border: '#74f2ce' }, font: { color: 'white' } },
      { id: 'backup', label: 'Backup & DR', shape: 'box', color: { background: '#4a3b1a', border: '#ffd28f' }, font: { color: 'white' } },
      { id: 'gov', label: 'Governan√ßa & Compliance', shape: 'ellipse', color: { background: '#2b3a3f', border: '#9fbdb6' }, font: { color: 'white' } },
      { id: 'partners', label: 'Parceiros / APIs', shape: 'ellipse', color: { background: '#5b1f2e', border: '#ffb3c9' }, font: { color: 'white' } }
    ]);

    const gaiaEdges = new vis.DataSet([
      { from: 'idm', to: 'perimeter', arrows: 'to', color: { color: '#74f2ce' } },
      { from: 'perimeter', to: 'gaia', arrows: 'to', color: { color: '#74f2ce' } },
      { from: 'edge', to: 'perimeter', arrows: 'to', color: { color: '#74f2ce' } },
      { from: 'plant', to: 'perimeter', arrows: 'to', color: { color: '#74f2ce' } },
      { from: 'gaia', to: 'crypto', arrows: 'to', color: { color: '#74f2ce' } },
      { from: 'gaia', to: 'siem', arrows: 'to', color: { color: '#74f2ce' } },
      { from: 'siem', to: 'bio', arrows: 'to', color: { color: '#74f2ce' } },
      { from: 'bio', to: 'gaia', arrows: 'to', color: { color: '#74f2ce' } },
      { from: 'gaia', to: 'backup', arrows: 'to', color: { color: '#ffd28f' } },
      { from: 'gov', to: 'gaia', arrows: 'to', color: { color: '#9fbdb6' } },
      { from: 'gaia', to: 'partners', arrows: 'to', color: { color: '#ffb3c9' } }
    ]);

    const gaiaOptions = {
      physics: {
        enabled: true,
        barnesHut: {
          gravitationalConstant: -7000,
          centralGravity: 0.25,
          springLength: 200,
          springConstant: 0.05
        },
        stabilization: { enabled: true, iterations: 250 }
      },
      interaction: { hover: true, dragNodes: true, zoomView: true, tooltipDelay: 100 },
      nodes: { borderWidth: 2, shadow: true, font: { size: 14 } },
      edges: { arrows: { to: { enabled: true, scaleFactor: 1.2 } }, smooth: { enabled: true, type: 'dynamic' } },
      layout: { improvedLayout: true }
    };

    const gaiaContainer = document.getElementById('networkGaia');
    const gaiaData = { nodes: gaiaNodes, edges: gaiaEdges };
    const networkGaia = new vis.Network(gaiaContainer, gaiaData, gaiaOptions);
    window.networkGaia = networkGaia;

    networkGaia.on('doubleClick', function () {
      networkGaia.fit({ animation: { duration: 400, easing: 'easeInOutQuad' } });
    });

    const gaiaDetails = {
      'idm': { title: 'Identidade & Acesso', text: 'MFA (aplicativo/Token), certificados por unidade (PKI BIO), RBAC por papel e contas de servi√ßo segregadas com rota√ß√£o de chaves.' },
      'perimeter': { title: 'Per√≠metro / VPN / NGFW', text: 'VPN obrigat√≥ria (WireGuard/OpenVPN), firewalls NGFW, prote√ß√£o DDoS e filtragem L7 para APIs e pain√©is.' },
      'gaia': { title: 'Nuvem GAIA', text: 'Plano de controle e dados: orquestra√ß√£o, pipelines, armazenamentos e servi√ßos. Pol√≠ticas de seguran√ßa por projeto/namespace.' },
      'crypto': { title: 'Criptografia (TLS 1.3 / KMS)', text: 'Criptografia em tr√¢nsito (TLS 1.3) e em repouso com gerenciamento central de chaves (KMS). Segredos em cofre seguro.' },
      'siem': { title: 'Monitoramento & SIEM', text: 'Coleta e correla√ß√£o de logs (Wazuh/ELK), detec√ß√£o de anomalias, painel em tempo real e alertas acion√°veis.' },
      'bio': { title: 'BIO ‚Äì Defesa Adaptativa', text: 'IA defensiva que aprende com incidentes, sugere/aciona playbooks, aplica conten√ß√£o e recomenda endurecimento.' },
      'backup': { title: 'Backup & DR', text: 'Replica√ß√£o geogr√°fica, testes regulares de restaura√ß√£o, WORM/immutable logs e plano de desastre validado.' },
      'gov': { title: 'Governan√ßa & Compliance', text: 'Trilhas de auditoria, conformidade ISO 27001/NIST, privacidade por design e aprova√ß√£o do Conselho BIO.' },
      'edge': { title: 'MCEFPs (Edge)', text: 'N√≥s de borda com hardening, atualiza√ß√µes assinadas, telemetria segura e opera√ß√£o offline-tolerante.' },
      'plant': { title: 'Ind√∫stria Matriz', text: 'Ambiente central de produ√ß√£o com microssegmenta√ß√£o, controle de mudan√ßas e integra√ß√£o segura com ERP/MES.' },
      'partners': { title: 'Parceiros / APIs', text: 'Integra√ß√µes externas com chaves de API de escopo m√≠nimo, limite de taxa e auditoria cont√≠nua.' }
    };

    function showGaiaDetails(id) {
      const panel = document.getElementById('nodeDetailsGaia');
      const d = gaiaDetails[id];
      if (!d) return;
      panel.innerHTML = `
        <h3>${d.title}</h3>
        <p>${d.text}</p>
        <button class="close-btn" onclick="closeGaiaDetails()">Fechar</button>
      `;
      panel.style.display = 'block';
      panel.scrollIntoView({behavior: 'smooth', block: 'center'});
    }

    function closeGaiaDetails() {
      const panel = document.getElementById('nodeDetailsGaia');
      panel.style.display = 'none';
      panel.innerHTML = '';
    }

    networkGaia.on('click', function (params) {
      if (params.nodes.length > 0) showGaiaDetails(params.nodes[0]);
    });

    document.addEventListener('visibilitychange', function () {
      if (!document.hidden && window.networkGaia) window.networkGaia.redraw();
    });
  </script>
</body>
</html>
